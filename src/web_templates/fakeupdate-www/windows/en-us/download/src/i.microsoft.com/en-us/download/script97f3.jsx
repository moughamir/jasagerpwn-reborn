if(window.Hp===undefined)window.Hp={};if(typeof window.Hp.Grid=="undefined")window.Hp.Grid={logenabled:!1,isInitialized:!1,alignmentSwitch:{hpHro:!0},controlDelegate:{},init:function(){if(Hp.Grid.isInitialized)return;Hp.Grid.isInitialized=!0;var a=this;$(".hpGrd_Row").live("GridResize",Hp.Grid.gridResizeHandler);$(".hpGrd_Row:visible").each(function(){Hp.Grid.rowContentResize($(this),$(this).height())});$(".hpPvt_body,.hpVpv_Body,.hpGrid_ResizeListener").live("PivotShow",Hp.Grid.pivotShowHandler);if($.browser.msie&&parseInt($.browser.version)==7)$.fx.interval=45;if(window.location.hash.indexOf("anilog")>0){$("body").prepend('<div id="JquerySettings" style="position:absolute;z-index:999;font-size:10px;"><a href="#" class="sub">-</a> <a href="#" class="add">+</a><br/><span class="currentInt"></span></div>');$("#JquerySettings a").live("click",function(){$.fx.interval=$(this).hasClass("add")?$.fx.interval+5:$.fx.interval-5;$("#JquerySettings .currentInt").html($.fx.interval)})}},log:function(a){if(this.logenabled)try{console.log(a)}catch(b){}},_ignoreWrapper:[],ignoreWrapper:function(a){if(typeof a=="string"&&$.trim(a)!="")$.inArray(a,this._ignoreWrapper)==-1&&this._ignoreWrapper.push(a);else if(typeof attr=="object")for(var b=0;b<a.length;b++){a[b]=$.trim(a[b]);$.inArray(a[b],this._ignoreWrapper)==-1&&this._ignoreWrapper.push(a[b])}},excludeIgnoredWrapper:function(a){if(this._ignoreWrapper.length==0)return a;var c="."+this._ignoreWrapper.join(",."),b=a.not(c);if(b.length==a.length)return a;a.filter(c).each($.proxy(function(c,a){b=b.add($(a).children("[nodeName!='SCRIPT']:not(.hpGrd_Filler)"))},this));return b},gridResizeHandler:function(d,b,g){var c=$(d.target).closest(".hpGrd_Row"),f=$(d.target).closest(".hpGrd_Cell"),e=f.siblings(".hpGrd_Cell"),a=0;e.each(function(){var b=Hp.Grid.getHeight($(this),c);if(a<b)a=b});a=b<a?a:b;Hp.Grid.rowContentResize(c,a,g)},pivotShowHandler:function(a){try{$(a.target).find(".hpGrd_Row").each(function(){Hp.Grid.rowContentResize($(this),$(this).height())})}catch(a){}},rowContentResize:function(c,b,a){c.attr("rowheight",b);c.find(".hpGrd_Cell").each($.proxy(function(g,e){var c=$(e).children("[nodeName!='SCRIPT']:not(.hpGrd_Filler)");c=this.excludeIgnoredWrapper(c);if(c.length>1){var d=0,f=c.length;c.each(function(g,c){var e=Hp.Grid.getItemHeight($(c));d+=e;if(g==f-1)Hp.Grid.controlResize($(c),e+(b-d),a);else Hp.Grid.controlResize($(c),e,a)})}else Hp.Grid.controlResize(c.first(),b,a)},this))},getHeight:function(c,d){var b=0,a=c.children("[nodeName!='SCRIPT']:not(.hpGrd_Filler)");a=this.excludeIgnoredWrapper(a);a.each(function(){b+=Hp.Grid.getItemHeight($(this),d)});return b},getDelegateName:function(a){if(!a)return!1;for(var b in this.controlDelegate)if(a.hasClass(b))return b;return!1},getItemHeight:function(a){var b=0;if(!a)return b;a=$(a);var d="",c=this.getDelegateName(a);if(this.controlDelegate[c]&&this.controlDelegate[c].getItemHeight!=undefined)try{b=this.controlDelegate[c].getItemHeight(a)}catch(e){b=a.innerHeight();this.log(e)}else b=a.innerHeight();this.log("grid:getItemHeight height["+b+"] type["+c+"]");return b},getSiblingMaxHeight:function(b){var e=$(b).closest(".hpGrd_Row"),d=$(b).closest(".hpGrd_Cell"),c=d.siblings(".hpGrd_Cell"),a=0;c.each(function(){var b=Hp.Grid.getHeight($(this),e);if(a<b)a=b});return a},controlResize:function(d,c,b){var e="";b=b||200;if($.browser.msie&&parseInt($.browser.version)==6)b=0;var a=this.getDelegateName(d);if(this.controlDelegate[a]&&this.controlDelegate[a].resize!=undefined)try{this.controlDelegate[a].resize(d,c,b)}catch(f){this.log(f)}this.log("grid:resize height["+c+"] type["+a+"]")}};Hp.Grid.controlDelegate.hpHro={getItemHeight:function(i){var g;if(Hp.Grid.alignmentSwitch&&Hp.Grid.alignmentSwitch.hpHro){var d=0,a,h,b,f,e,c;i.find(".hpHro_Item").each($.proxy(function(j,i){b=$(i);h=b.css("min-height");b.css("min-height","");a=Math.round(parseFloat(b.outerHeight()));b.css("min-height",h);var g=b.find(".hpHro_Resize");f=b.find(".hpHro_ImgWrap");e=f.height()||320;c=parseInt(f.attr("rel"))||320;a=g.length>0?a-g.height():a;a=e>c?a-(e-c):a;if(a>d)d=a},this));g=d}else g=i.innerHeight();return g},_getHeightAdj:function(a){var b=a.find(".hpHro_Resize");if(!b.length){var c=a.find(".hpHro_Text");if(c.length>0)c.append('<div class="hpHro_Resize"></div>');else a.append('<div class="hpHro_Resize"></div>');b=a.find(".hpHro_Resize")}return b},resize:function(b,c,a){if(!b.hasClass("init"))return!1;Hp.Grid.alignmentSwitch&&Hp.Grid.alignmentSwitch.hpHro&&b.find(".hpHro_Item").each($.proxy(function(q,p){var i,l,b,e,m,k,g,j,f,d,n,o,h=$(p);h.css("min-height","");o=Math.round(parseFloat(h.outerHeight()));n=Math.round(parseFloat(h.innerHeight()));$heightAdj=this._getHeightAdj($(p));i=h.find(".hpHro_ImgWrap");l=i.children(".hpImage_Img,.hpImage_Clip").first().height();b=parseInt(i.attr("rel"))||320;e=l>b?l-b:0;m=$heightAdj.height();k=i.height()||320;g=m+(k-b);h.css("min-height",n-g+"px");d=c-(o-g);if(d!=g){if(e>d){f=b+d;j=0}else{f=b+e;j=d-e}f!=k&&i.animate({height:f},a);j!=m&&$heightAdj.animate({height:j},a)}Hp.Grid.log("Grid:Hero:resize: oldHAdjTotal["+g+"]oldHAdj["+m+"]oldImageWrapH["+k+"]newHAdjTotal["+d+"]newHAdj["+j+"]newImageWrapH["+f+"]imageClipHeight["+b+"]imageWrapSpace["+e+"]imageHeight["+l+"]")},this))}};Hp.Grid.controlDelegate.hpAcc={getItemHeight:function(b){var a=0;if(Hp.Accordion.getContainerHeightData)a=Hp.Accordion.getContainerHeightData(b).height;return a},resize:function(c,b,a){Hp.Accordion.resize&&Hp.Accordion.resize(c,b,a)}};Hp.Grid.controlDelegate.hpLst={getItemHeight:function(c){var a=0,b=c.find(".hpLst_Resize").innerHeight();b=b?b:0;a=c.outerHeight();a=a-b;return a},resize:function(b,f,d){var a=b.find(".hpLst_Resize");if(!a.length){b.find(".hpLst_body").after('<div class="hpLst_Resize"></div>');a=b.find(".hpLst_Resize")}var e=a.height(),g=this.getItemHeight(b),c=f-g;c!=e&&a.animate({height:c},d)}};Hp.Grid.controlDelegate.hpCrs={getItemHeight:function(a){return a.innerHeight()},resize:function(){}};jQuery.cookie=function(d,c,a){if(typeof c!="undefined"){a=a||{};if(c===null){c="";a=$.extend({},a);a.expires=-1}var h="";if(a.expires&&(typeof a.expires=="number"||a.expires.toUTCString)){var b;if(typeof a.expires=="number"){b=new Date;b.setTime(b.getTime()+a.expires*864e5)}else b=a.expires;h="; expires="+b.toUTCString()}var l=a.path?"; path="+a.path:"",j=a.domain?"; domain="+a.domain:"",k=a.secure?"; secure":"";document.cookie=[d,"=",encodeURIComponent(c),h,l,j,k].join("")}else{var f=null;if(document.cookie&&document.cookie!="")for(var g=document.cookie.split(";"),e=0;e<g.length;e++){var i=jQuery.trim(g[e]);if(i.substring(0,d.length+1)==d+"="){f=decodeURIComponent(i.substring(d.length+1));break}}return f}};$.dlcbi={};$.dlcbi.georedirect={close:function(b){var a=$.bi.getLinkData(b,b);a.interactiontype=10;a.title="close";a.parenttypestructure="hpMaster";$.extend(a,{cot:"5"});$.bi.record(a)},open:function(){var a={};a.interactiontype=9;a.title="open";$.bi.record(a)},no:function(c){var a=$.bi.getLinkData(c,c);ignoreAttrs=["urifull","uripath","uriquery","uridomain","urihash"];for(var b=0;b<ignoreAttrs.length;b++)if(a[ignoreAttrs[b]]!=undefined)delete a[ignoreAttrs[b]];$.extend(a,{interactiontype:"17"});$.extend(a,{cot:"5"});$.bi.record(a)}};$(function(){if(!($.cookie("geoRedirectionChoice")==="nothanks")){var a;if(geoRedirectAjaxUrl){var b=!1,c=!1,d=0;$(window).load(function(){b=!0});$.get(geoRedirectAjaxUrl,function(f){a=$(f);if(a.attr("class")==="geo"){$("Form:first").prepend(a);a.find(".close").click(function(){a.slideToggle();$.dlcbi.georedirect.close(this)});a.find(".nothanks").click(function(){a.slideToggle();$.cookie("geoRedirectionChoice","nothanks",{expires:365});$.dlcbi.georedirect.no(this)});var e=function(){if(!c&&(b||d>6)){a.slideDown("slow");$.dlcbi.georedirect.open();c=!0}else{d++;window.setTimeout(function(){e()},1e3)}};e()}})}}});(function(a){var b=[],g=500,e={width:500,height:400,backgroundColor:"#000000",backgroundOpacity:"0.1",topColor:"#FFFFFF",onLoad:function(){},onClose:function(){}},i="overlay-container-",d={init:function(a){e=jQuery.extend(e,a);return this},show:function(s){var c;c=a.extend({root:document.body,source:this,id:g},e,s);b.push(c);c.overlayContainerId=i+g;var m=this.clone(!0),q="-backup-"+c.id;this.find("input").each(function(){var b=a(this).attr("name");a(this).attr("name",b+q)});var o=document.createElement("div");o.id=c.overlayContainerId;var d=a(o);d.css({display:"none",top:"0px",left:"0px",right:"0px",bottom:"0px",position:"fixed",overflow:"auto"});a(c.root).prepend(d);var p=document.createElement("div"),l=a(p);l.css({background:c.backgroundColor,opacity:c.backgroundOpacity,top:"0px",left:"0px",right:"0px",bottom:"0px",position:"fixed"});d.append(l);if(a.browser.msie&&a.browser.version==6){d.css("position","absolute");l.css("position","absolute")}var r=document.createElement("div"),n=a(r);n.css({background:c.topColor,position:"absolute",width:c.width,height:c.height});d.append(n);l.click(c.overlayContainerId,h);if(c.overlayTempalte){var k=c.overlayTempalte.clone();k.removeAttr("id");n.append(k);k.find("div.OverlayCloseArea").click(c.overlayContainerId,h);k.find("div.OverlayPlaceHolder").replaceWith(m.get(0));k.show()}else n.append(m);d.css("z-index",g++);d.show();m.show();j();d.focus();f();c.onLoad();return m},addMethod:function(b,a){d[b]=a;return this},close:function(){c(b.length-1);return this}};function k(k){var f,h,c,m,d,n,l;if(k<0||k>=b.length)return;if(k==b.length-1)l="auto";else l="hidden";f=b[k].overlayContainerId;h=a("div#"+f);m=a("div#"+f+" > div:first-child");c=h.get(0);d=a("div#"+f+" > div:last-child ");n=d.get(0);h.css("overflow",l);var g,e,j,i;if(a.browser.msie&&a.browser.version==6){var p=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,o=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft;h.css({top:p,left:o,width:"100%",height:"100%"});j="100%";i="100%";g=(a(window).height()-d.height())/2;e=(a(window).width()-d.width())/2}else{if(n.scrollHeight>c.clientHeight)j=c.clientWidth;else j="";if(c.scrollWidth>c.clientWidth)i=c.clientHeight;else i="";g=(c.clientHeight-d.height())/2;e=(c.clientWidth-d.width())/2}m.css({width:j,height:i});d.css({top:g>=0?g:0,left:e>=0?e:0})}function f(){if(b.length<=0){a("html").css({overflow:""});l();return}else a("html").css({overflow:"hidden"});for(var c=0;c<b.length;c++)k(c)}function h(e){var d;if(!e||a.type(e)=="object"&&e.data==null)for(d=b.length-1;d>=0;d--)c(d);else for(d=b.length-1;d>=0;d--)if(b[d].overlayContainerId==e||b[d].overlayContainerId==e.data){c(d);break}}function c(d){var c=b[d];b.splice(d,1);var e=a("div#"+c.overlayContainerId);e.remove();var g=c.source,h="-backup-"+c.id;a(g).find("input").each(function(){var b=a(this).attr("name"),c=b.replace(h,"");a(this).attr("name",c)});c.onClose();f();b.length>0&&a("div#"+b[b.length-1].overlayContainerId).focus()}function j(){a.browser.msie&&a.browser.version==6&&a("SELECT").css("visibility","hidden")}function l(){a.browser.msie&&a.browser.version==6&&a("SELECT").css("visibility","visible")}a(window).resize(function(){f()});a.fn.DlcOverlay=function(b){if(d[b])return d[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return d.show.apply(this,arguments);else a.error("Method "+b+" does not exist on jQuery.DlcOverlay")};a(document).keydown(function(a){a.keyCode==27&&c(b.length-1)})})(jQuery)
